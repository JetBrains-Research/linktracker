image: gradle:6.0.1-jdk8

stages:
  - Lint
  - Build
  - Test

default: # Set gradle user home
  before_script:
    - export GRADLE_USER_HOME=`pwd`/.gradle

staticAnalysis:
  stage: Lint
  only:
    - tags
    - merge_requests
  script:
    - gradle ktlintCheck

build:
  stage: Build
  script:
    - gradle assemble

test:
  stage: Test
  script:
    - gradle test
